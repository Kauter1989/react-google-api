!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],e):e(t.ReactGoogleApi={},t.React)}(this,function(t,e){"use strict";function n(t){return function(){return t}}e=e&&e.hasOwnProperty("default")?e.default:e;var r=function(){};r.thatReturns=n,r.thatReturnsFalse=n(!1),r.thatReturnsTrue=n(!0),r.thatReturnsNull=n(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(t){return t};var o=r;var i,s=function(t,e,n,r,o,i,s,a){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,i,s,a],p=0;(u=new Error(e.replace(/%s/g,function(){return c[p++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}},a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";(function(t){t.exports=function(){function t(t,e,n,r,o,i){i!==a&&s(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=o,n.PropTypes=n,n}()})(i={exports:{}},i.exports);function u(t){return function(){return t}}var c=function(){};c.thatReturns=u,c.thatReturnsFalse=u(!1),c.thatReturnsTrue=u(!0),c.thatReturnsNull=u(null),c.thatReturnsThis=function(){return this},c.thatReturnsArgument=function(t){return t};var p=c;var l=function(t,e,n,r,o,i,s,a){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,i,s,a],p=0;(u=new Error(e.replace(/%s/g,function(){return c[p++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}},f=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable;(function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}})()&&Object.assign;var b="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",y=function(t,e){return t(e={exports:{}},e.exports),e.exports}(function(t){t.exports=function(){function t(t,e,n,r,o,i){i!==b&&l(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=p,n.PropTypes=n,n}()}),v=function(t,e,n,r,o,i,s,a){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,o,i,s,a],p=0;(u=new Error(e.replace(/%s/g,function(){return c[p++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}},m=function(){};var g=m;function O(){var t=!1;return function(e){g(t,e),t=!0}}var P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},x=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},T=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},w=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},R=O();var S=function(t){function n(){var e,r,o,i,s;j(this,n);for(var a=arguments.length,u=Array(a),c=0;c<a;c++)u[c]=arguments[c];return e=r=w(this,t.call.apply(t,[this].concat(u))),r.broadcast=(o=r.props.value,i=o,s=[],{getValue:function(){return i},publish:function(t){i=t,s.forEach(function(t){return t(i)})},subscribe:function(t){return s.push(t),function(){s=s.filter(function(e){return e!==t})}}}),w(r,e)}return T(n,t),n.prototype.getChildContext=function(){var t;return{broadcasts:x({},this.context.broadcasts,(t={},t[this.props.channel]=this.broadcast,t))}},n.prototype.componentWillMount=function(){R("<Broadcast> is deprecated and will be removed in the next major release. Please use createContext instead. See https://goo.gl/QAF37J for more info.")},n.prototype.componentWillReceiveProps=function(t){v(this.props.channel===t.channel,"You cannot change <Broadcast channel>"),this.props.compareValues(this.props.value,t.value)||this.broadcast.publish(t.value)},n.prototype.render=function(){return e.Children.only(this.props.children)},n}(e.Component);S.propTypes={channel:y.string.isRequired,children:y.node.isRequired,compareValues:y.func,value:y.any},S.defaultProps={compareValues:function(t,e){return t===e}},S.contextTypes={broadcasts:y.object},S.childContextTypes={broadcasts:y.object.isRequired};var C=O(),_=function(t){function e(){var n,r;j(this,e);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=w(this,t.call.apply(t,[this].concat(i))),r.state={value:void 0},w(r,n)}return T(e,t),e.prototype.getBroadcast=function(){var t=(this.context.broadcasts||{})[this.props.channel];return v(this.props.quiet||t,'<Subscriber channel="%s"> must be rendered in the context of a <Broadcast channel="%s">',this.props.channel,this.props.channel),t},e.prototype.componentWillMount=function(){C("<Subscriber> is deprecated and will be removed in the next major release. Please use createContext instead. See https://goo.gl/QAF37J for more info.");var t=this.getBroadcast();t&&this.setState({value:t.getValue()})},e.prototype.componentDidMount=function(){var t=this,e=this.getBroadcast();e&&(this.unsubscribe=e.subscribe(function(e){t.setState({value:e})}))},e.prototype.componentWillUnmount=function(){this.unsubscribe&&this.unsubscribe()},e.prototype.render=function(){var t=this.props.children;return t?t(this.state.value):null},e}(e.Component);_.propTypes={channel:y.string.isRequired,children:y.func,quiet:y.bool},_.defaultProps={quiet:!1},_.contextTypes={broadcasts:y.object};var E={string:y.string,number:y.number,function:y.func,boolean:y.bool};var A=function(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function r(o,i){try{var s=e[o](i),a=s.value}catch(t){return void n(t)}if(!s.done)return Promise.resolve(a).then(function(t){r("next",t)},function(t){r("throw",t)});t(a)}("next")})}},I=function(t){var n,r,o="object"===(r=void 0===(n=t)?"undefined":P(n))?Array.isArray(n)?y.array:y.object:E[r]||y.any,i=Symbol(),s=function(t){function e(){var n,r;j(this,e);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=r=w(this,t.call.apply(t,[this].concat(i))),r.subscribers=[],r.publish=function(t){r.subscribers.forEach(function(e){return e(t)})},r.subscribe=function(t){return r.subscribers.push(t),function(){r.subscribers=r.subscribers.filter(function(e){return e!==t})}},w(r,n)}return T(e,t),e.prototype.getChildContext=function(){var t;return{broadcasts:x({},this.context.broadcasts,(t={},t[i]={initialValue:this.props.value,subscribe:this.subscribe},t))}},e.prototype.componentWillReceiveProps=function(t){this.props.value!==t.value&&this.publish(t.value)},e.prototype.render=function(){return this.props.children},e}(e.Component);s.defaultValue=t,s.propTypes={children:y.node,value:o},s.defaultProps={value:t},s.contextTypes={broadcasts:y.object},s.childContextTypes={broadcasts:y.object.isRequired};var a=function(e){function n(){var r,o;j(this,n);for(var s=arguments.length,a=Array(s),u=0;u<s;u++)a[u]=arguments[u];return r=o=w(this,e.call.apply(e,[this].concat(a))),o.broadcast=o.context.broadcasts&&o.context.broadcasts[i],o.state={value:o.broadcast?o.broadcast.initialValue:t},w(o,r)}return T(n,e),n.prototype.componentDidMount=function(){var t=this;this.broadcast?this.unsubscribe=this.broadcast.subscribe(function(e){t.setState({value:e})}):g(this.props.quiet,"<Consumer> was rendered outside the context of its <Provider>")},n.prototype.componentWillUnmount=function(){this.unsubscribe&&this.unsubscribe()},n.prototype.render=function(){var t=this.props.children;return t?t(this.state.value):null},n}(e.Component);return a.contextTypes={broadcasts:y.object},a.propTypes={children:y.func,quiet:y.bool},a.defaultProps={quiet:!1},{Provider:s,Consumer:a}}(null);const q=I.Provider,k=I.Consumer;q.displayName="GoogleApiProvider",k.displayName="GoogleApiConsumer";t.GoogleApi=class extends e.Component{constructor(...t){var e;return e=super(...t),this.authorize=(()=>{this.auth&&this.auth.signIn()}),this.signout=(()=>{this.auth&&this.auth.signOut()}),this.state={signedIn:!1,client:null,loading:!0,error:null,authorize:this.authorize,signout:this.signout},e}componentDidMount(){this.setupApi()}setupApi(){var t=this;return A(function*(){try{void 0===window.gapi&&(yield(e="https://apis.google.com/js/api.js",new Promise((t,n)=>{const r=document.createElement("script");r.onload=t,r.onerror=n,r.src=e,r.async=!0,r.type="text/javascript",document.head.appendChild(r)}))),gapi.client||(yield new Promise(function(t,e){return gapi.load("client:auth2",{callback:t,onerror:e})})),yield gapi.client.init({apiKey:t.props.apiKey,clientId:t.props.clientId,discoveryDocs:t.props.discoveryDocs,scope:t.props.scopes.join(",")})}catch(e){return void t.setState({loading:!1,error:e})}var e;t.auth=gapi.auth2.getAuthInstance(),t.setState({client:gapi.client,loading:!1,signedIn:t.auth.isSignedIn.get()}),t.auth.isSignedIn.listen(function(e){return t.setState({signedIn:e})})})()}render(){return e.createElement(q,{value:this.state},"function"==typeof this.props.children?this.props.children(this.state):this.props.children)}},t.GoogleApiConsumer=k,Object.defineProperty(t,"__esModule",{value:!0})});
